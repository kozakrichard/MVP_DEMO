(this["webpackJsonpnightingale-ui"]=this["webpackJsonpnightingale-ui"]||[]).push([[0],{100:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),l=n(22),r=n.n(l),s=(n(61),n(62),n(7)),o=n.n(s),i=n(10),u=n(6),d=n(29),j=n(23),b=(n(66),n(28)),h=n.n(b),p=n(54),m=(n(5),n(41),n(2));function O(e){var t=Object(c.useState)({data:{instrument:"monoSynth"}}),n=Object(u.a)(t,2),a=n[0],l=n[1],r=Object(p.a)(),s=r.register,b=r.handleSubmit,h=Object(c.useRef)(1),O=Object(c.useRef)(0),f=Object(c.useRef)(0),v=Object(c.useState)(-1),x=Object(u.a)(v,2),g=x[0],y=x[1],S=["C8","B7","A#7","A7","G#7","G7","F#7","F7","E7","D#7","D7","C#7","C7","B6","A#6","A6","G#6","G6","F#6","F6","E6","D#6","D6","C#6","C6","B5","A#5","A5","G#5","G5","F#5","F5","E5","D#5","D5","C#5","C5","B4","A#4","A4","G#4","G4","F#4","F4","E4","D#4","D4","C#4","C4","B3","A#3","A3","G#3","G3","F#3","F3","E3","D#3","D3","C#3","C3","B2","A#2","A2","G#2","G2","F#2","F2","E2","D#2","D2","C#2","C2","B1","A#1","A1","G#1","G1","F#1","F1","E1","D#1","D1","C#1","C1","B0","A#0","A0"],N=Object(c.useRef)([[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]);localStorage.setItem("CURRENT_STEPS",JSON.stringify(N.current));var C=function(){e.setPlay(!1);for(var t=document.querySelectorAll("div.piano-roll-cell.blue"),n=0;n<t.length;n++)t[n].classList.toggle("blue");for(var c=0;c<N.current.length;c++)N.current[c]=[];L(),localStorage.setItem("CURRENT_STEPS",JSON.stringify(N.current))},E=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,c,a,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(C(),t=document.querySelectorAll("div.piano-roll-cell"),n=0,c=0,a=0;a<t.length;a++)c=a%88,l=Math.random(),n=(Math.round(420*l)+1)%N.current.length,l<.1&&!1===t[88*n+c].classList.contains("blue")&&(t[88*n+c].classList.toggle("blue"),N.current[n]=N.current[n].concat([S[c]]));console.log("randomize: ".concat(N.current[0])),localStorage.setItem("CURRENT_STEPS",JSON.stringify(N.current));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=document.querySelector(".piano-roll-container--scrollable"),c=/\w#\d/g,a=document.querySelector(".tes"),l=document.createElement("div");l.classList.add("piano-roll-col-container");var r=document.createElement("div");r.classList.add("piano-roll-col-label");var s=document.createElement("span");s.innerText=t,r.appendChild(s),l.appendChild(r);for(var o=function(n){var r=document.createElement("div");if(r.classList.add("piano-roll-cell"),f.current>=703){var s,o=0;for(s=f.current+1;s>S.length-1;)s-=S.length,o++;f.current=f.current+1,r.addEventListener("click",(function(){r.classList.toggle("blue"),e.setPlay(!1),a.innerHTML="col: ".concat(o,", row: ").concat(s,", index%8 = ").concat(t%8),-1==N.current[o].indexOf(S[s])?-1!=N.current[o].indexOf(S[s])||(N.current[o]=N.current[o].concat([S[s]])):N.current[o]=N.current[o].filter((function(e){return e!=S[s]}))}))}S[n].match(c)&&r.classList.add("sharp-color"),l.appendChild(r)},i=0;i<S.length;i++)o(i);n.appendChild(l)},L=function(){var e=document.querySelector(".purple");try{e.classList.remove("purple")}catch(t){return}};Object(c.useEffect)((function(){var t=document.querySelectorAll(".piano-roll-col-label");t.forEach((function(e){e.classList.contains("purple")&&console.log("purple")})),e.play&&(t[(h.current+1)%(O.current-1)].classList.remove("purple"),t[h.current].classList.remove("purple"),t[g].classList.add("purple"))}),[g]),Object(c.useEffect)((function(){var t=document.querySelector(".piano-roll-playhead");if(e.play){console.log(t);var n=window.getComputedStyle(t).left;console.log(window.getComputedStyle(t).left),console.log("before "+t.style.left),t.style.left=parseInt(n)+49+"px",console.log("after "+t.style.left)}}));return Object(c.useEffect)((function(){document.querySelector(".tes");!function(){for(var e=1;e<=24;e++)P(e),O.current+=1;var t=document.querySelector(".piano-roll-row-container"),n=/\w#\d/g;S.forEach((function(e){var c=document.createElement("div"),a=document.createElement("span");a.innerText=e,c.appendChild(a),c.classList.add("piano-roll-row-label"),e.match(n)&&c.classList.add("sharp-color"),t.appendChild(c),"C4"==e&&c.scrollIntoView()}))}(),document.querySelectorAll(".piano-roll-cell").forEach((function(t,n,c){f.current=n,t.addEventListener("click",(function(){e.setPlay(!1),L(),y(-1);var c,a=0;for(c=n;c>S.length-1;)c-=S.length,a++;localStorage.setItem("CURRENT_STEPS",JSON.stringify(N.current)),t.classList.toggle("blue"),-1==N.current[a].indexOf(S[c])?-1!=N.current[a].indexOf(S[c])||(N.current[a]=N.current[a].concat([S[c]])):N.current[a]=N.current[a].filter((function(e){return e!=S[c]}))}))}))}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"piano-roll-landing-container",children:[Object(m.jsx)("p",{className:"tes"}),Object(m.jsxs)("div",{className:"clickables",children:[Object(m.jsx)("div",{className:"instrumentChanger",children:Object(m.jsxs)("form",{id:"instrumentForm",onSubmit:b((function(e){l({data:e}),console.log(e)})),children:[Object(m.jsxs)("label",{children:["Select Instrument",Object(m.jsx)("div",{className:"instrumentsContent",children:Object(m.jsxs)("select",Object(d.a)(Object(d.a)({},s("instrument")),{},{children:[Object(m.jsx)("option",{value:"monoSynth",children:"monoSynth"}),Object(m.jsx)("option",{value:"amSynth",children:"amSynth"}),Object(m.jsx)("option",{value:"duoSynth",children:"duoSynth"}),Object(m.jsx)("option",{value:"fmSynth",children:"fmSynth"}),Object(m.jsx)("option",{value:"membraneSynth",children:"membraneSynth"}),Object(m.jsx)("option",{value:"metalSynth",children:"metalSynth - NA "}),Object(m.jsx)("option",{value:"pluckSynth",children:"pluckSynth"}),Object(m.jsx)("option",{value:"synth",children:"synth"})]}))})]}),Object(m.jsx)("button",{class:"applyButton",type:"submit",value:"Apply",children:"Apply"})]})}),Object(m.jsx)("button",{class:"btn",onClick:C,children:"Clear"}),Object(m.jsx)("button",{class:"btn",onClick:E,children:"Randomize"})]}),Object(m.jsx)(j.b,{isPlaying:e.play,bpm:e.bpm,children:Object(m.jsx)(j.c,{steps:N.current,onStepPlay:function(e,t){y(t),h.current=(t+(O.current-1))%O.current,console.log("num of col: ".concat(O.current)),console.log("index "+t)},volume:e.vol,pan:e.pan,children:Object(m.jsx)(j.a,{type:a.data.instrument})})}),Object(m.jsx)("div",{className:"piano-roll-playhead"}),Object(m.jsx)("section",{className:"piano-roll-container",children:Object(m.jsx)("section",{className:"piano-roll-container--scrollable",children:Object(m.jsx)("div",{className:"piano-roll-row-container",children:Object(m.jsx)("div",{className:"piano-roll-row-label",children:Object(m.jsx)("span",{})})})})})]}),Object(m.jsx)("div",{})]})}var f=n.p+"static/media/night.3087ad10.mp4",v=(n(46),n(95),n.p+"static/media/Nightingale.7b2356f2.png"),x=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"NavContainer",children:[Object(m.jsx)("img",{className:"Logo",alt:"logo",src:v}),Object(m.jsx)("h1",{className:"nameLogo",children:"Nightingale"}),Object(m.jsx)("button",{class:"playbtn",onClick:function(){e.setPlay(!e.play),e.play},children:e.play?"Stop":"Play"}),Object(m.jsxs)("div",{className:"BPMwrapper",children:[Object(m.jsx)("button",{onClick:e.decrement10,className:"bpmBtn10",children:"-10"}),Object(m.jsx)("button",{onClick:e.decrement,className:"bpmBtn",children:"-"}),Object(m.jsxs)("div",{className:"BPMcount",children:[e.bpm," bpm"]}),Object(m.jsx)("button",{onClick:e.increment,className:"bpmBtn",children:"+"}),Object(m.jsx)("button",{onClick:e.increment10,className:"bpmBtn10",children:"+10"})]})]})})},g=(n(96),function(e){var t,n,a=Object(c.useState)(-50),l=Object(u.a)(a,2),r=l[0],s=l[1],o=Object(c.useState)(0),i=Object(u.a)(o,2),d=i[0],j=i[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"NavSide",children:[Object(m.jsx)("div",{className:"sliderContainer",children:Object(m.jsxs)("div",{className:"range",children:[Object(m.jsxs)("div",{className:"Vol",children:["Volume: ",(n=String(r),parseInt(n)+100)]}),Object(m.jsx)("div",{className:"slide",children:Object(m.jsxs)("div",{className:"field",children:[Object(m.jsx)("div",{className:"value left",children:"0"}),Object(m.jsx)("input",{className:"slider",type:"range",min:"-100",max:"0",onChange:function(t){e.handleVol(t.target.value),s(t.target.value)},value:r,steps:"1"}),Object(m.jsx)("div",{className:"value right",children:"100"})]})})]})}),Object(m.jsx)("div",{className:"sliderContainer two",children:Object(m.jsxs)("div",{className:"range",children:[Object(m.jsxs)("div",{className:"Vol",children:["Pan: ",(t=d,t<0?"L"+String(Math.abs(t)):t>0?"R"+String(t):String(t))]}),Object(m.jsx)("div",{className:"slide",children:Object(m.jsxs)("div",{className:"field",children:[Object(m.jsx)("div",{className:"value left",children:"L"}),Object(m.jsx)("input",{className:"slider",type:"range",min:"-100",max:"100",onChange:function(t){e.handlePan(t.target.value),j(t.target.value)},value:d,steps:"1"}),Object(m.jsx)("div",{className:"value right",children:"R"})]})})]})})]})})}),y=n(19),S=n(56),N=n(55),C=function(e){Object(S.a)(n,e);var t=Object(N.a)(n);function n(e){var c;return Object(y.a)(this,n),(c=t.call(this,e)).componentDidMount=function(){c.playVideo()},c.componentWillUnmount=function(){c.pauseVideo()},c.getVid=function(e){c.video=e},c.playVideo=function(){c.video.play(),c.setState({playing:!0})},c.pauseVideo=function(){c.video.pause(),c.setState({playing:!1})},c.render=function(){return Object(m.jsxs)("div",{className:"videoContainer",children:[Object(m.jsx)("video",{className:"Video",autoPlay:!0,loop:!0,muted:!0,ref:c.getVid,src:f,type:"video/mp4"}),Object(m.jsx)("div",{className:"playbuttons",children:Object(m.jsx)("button",{className:"videoButton",onClick:c.state.playing?c.pauseVideo:c.playVideo,children:c.state.playing?"Pause Background":"Play Background"})})]})},c.state={playing:!1},c}return n}(a.a.Component),E=n(30),P=n(8),L=(n(97),n(98),n(51)),A=n.n(L),B=n(17),k=(n(99),n(100),n(24)),w=n(53),F=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],l=Object(c.useState)(!1),r=Object(u.a)(l,2),s=r[0],o=r[1],i=Object(c.useState)(!1),d=Object(u.a)(i,2),j=d[0],b=d[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(E.a,{children:Object(m.jsxs)("div",{id:"header",children:[Object(m.jsxs)(B.c,{collapsed:n,rtl:!0,children:[Object(m.jsxs)(B.e,{children:[Object(m.jsx)("div",{className:"logotext",children:Object(m.jsx)("p",{children:n?"Menu":"Nightingale "})}),Object(m.jsx)("div",{className:"closemenu",onClick:function(){a(!n)},children:n?Object(m.jsx)(k.b,{}):Object(m.jsx)(k.a,{})})]}),Object(m.jsx)(B.d,{children:Object(m.jsxs)(B.a,{iconShape:"square",children:[Object(m.jsxs)("div",{class:"collab-btn",children:[Object(m.jsx)(B.b,{icon:Object(m.jsx)(k.c,{}),onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:"Collaborate"}),s&&Object(m.jsx)("div",{children:"Press ALT + T + T to enable user collaboration"})]}),Object(m.jsxs)("div",{class:"github-btn",children:[Object(m.jsxs)(B.b,{icon:Object(m.jsx)(w.a,{}),onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:["GitHub ",Object(m.jsx)(E.b,{to:"/github"})]}),j&&Object(m.jsx)("div",{children:"Go to Nightingale's Github"})]})]})})]}),Object(m.jsxs)(P.c,{children:[Object(m.jsx)(P.a,{path:"/github",component:function(){return window.location.href="https://github.com/kozakrichard/MVP_DEMO",null}}),Object(m.jsx)(P.a,{path:"/about",children:Object(m.jsx)(A.a,{})})]})]})})})},M=function(){var e=Object(c.useState)(75),t=Object(u.a)(e,2),n=t[0],a=t[1],l=Object(c.useState)(-50),r=Object(u.a)(l,2),s=r[0],d=r[1],j=Object(c.useState)(0),b=Object(u.a)(j,2),p=b[0],f=b[1],v=Object(c.useState)(!1),y=Object(u.a)(v,2),S=y[0],N=y[1],E=Object(c.useState)(""),P=Object(u.a)(E,2),L=(P[0],P[1]),A=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("CURRENT_STEPS")),e.next=3,h.a.post("/api/process_data",t).then((function(e){L(e.data),console.log(e)}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=Object(c.useState)(!1),k=Object(u.a)(B,2),w=k[0],M=k[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{increment:function(){n<200&&(a((function(e){return e+1})),console.log({BPM:n}))},decrement:function(){n>0&&(a((function(e){return e-1})),console.log({BPM:n}))},increment10:function(){n<190&&(a((function(e){return e+10})),console.log({BPM:n}))},decrement10:function(){n>10&&(a((function(e){return e-10})),console.log({BPM:n}))},bpm:n,tog:function(){N(!S)},play:w,setPlay:M,sendMitty:A}),Object(m.jsx)(g,{handleVol:function(e){console.log(s),d(e)},vol:s,handlePan:function(e){f(e)},pan:p}),Object(m.jsxs)("div",{className:"Container",children:[Object(m.jsx)(C,{}),Object(m.jsx)(O,{bpm:n,vol:s,pan:p,togg:S,play:w,setPlay:M})]}),Object(m.jsx)(F,{})]})};function G(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(M,{})})}r.a.render(Object(m.jsx)(G,{}),document.getElementById("root"));var R=G;r.a.render(Object(m.jsx)(R,{}),document.getElementById("root"))},46:function(e,t,n){},51:function(e,t){},61:function(e,t,n){},62:function(e,t,n){},66:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t){},98:function(e,t){}},[[107,1,2]]]);
//# sourceMappingURL=main.0e7d399c.chunk.js.map