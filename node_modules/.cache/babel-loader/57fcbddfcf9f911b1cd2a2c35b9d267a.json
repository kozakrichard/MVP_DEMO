{"ast":null,"code":"var _jsxFileName = \"/Users/nigel/Documents/GitHub/test/src/components/MusicComponents/PianoRoll.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Song, Track, Instrument } from 'reactronica';\nimport './PianoRoll.css'; // import ClearGrid from './clearGrid.js'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PianoRoll(props) {\n  _s();\n\n  const [isPlaying, setIsPlaying] = useState(false);\n  var previousStepIndex = useRef(1);\n  const numOfCol = useRef(0);\n  const numOfCells = useRef(0);\n  const [currentStepIndex, setCurrentStepIndex] = useState(-1);\n  const notes = ['C8', 'B7', 'A#7 ', 'A7', 'G#7 ', 'G7', 'F#7', 'F7', 'E7', 'D#7', ' D7', 'C#7', 'C7', 'B6', 'A#6 ', 'A6', 'G#6 ', 'G6', 'F#6', 'F6', 'E6', 'D#6', ' D6', 'C#6', 'C6', 'B5', 'A#5 ', 'A5', 'G#5 ', 'G5', 'F#5', 'F5', 'E5', 'D#5', ' D5', 'C#5', 'C5', 'B4', 'A#4 ', 'A4', 'G#4 ', 'G4', 'F#4', 'F4', 'E4', 'D#4', ' D4', 'C#4', 'C4', 'B3', 'A#3 ', 'A3', 'G#3 ', 'G3', 'F#3', 'F3', 'E3', 'D#3', ' D3', 'C#3', 'C3', 'B2', 'A#2 ', 'A2', 'G#2 ', 'G2', 'F#2', 'F2', 'E2', 'D#2', ' D2', 'C#2', 'C2', 'B1', 'A#1 ', 'A1', 'G#1 ', 'G1', 'F#1', 'F1 ', 'E1', 'D#1', ' D1', 'C#1', 'C1', 'B0', 'A#0', 'A0'];\n  const steps = useRef([[], [], [], [], [], [], [], []]);\n\n  const hello = e => {\n    return e;\n  };\n\n  const handleClear = () => {\n    setIsPlaying(false); //console.log(\"clicked\");\n\n    const testblues = document.querySelectorAll('div.piano-roll-cell.blue'); //console.log(testblues.length);\n\n    for (let i = 0; i < testblues.length; i++) {\n      testblues[i].classList.toggle('blue'); //if (steps.current[col].indexOf(notes[row]) === -1) {\n      //      steps.current[col] = steps.current[col].concat([notes[row]]);\n      //  } \n      //console.log(\"found blue\"); \n    }\n\n    for (let i = 0; i < steps.current.length; i++) {\n      steps.current[i] = [];\n    }\n\n    const col_label = document.querySelectorAll('.piano-roll-col-label');\n    col_label.forEach(e => {\n      if (e.classList.contains('purple')) {\n        console.log('purple');\n        col_label[previousStepIndex.current].classList.remove('purple');\n      }\n    });\n  };\n\n  const handleRandom = () => {\n    handleClear();\n    const randoms = document.querySelectorAll('div.piano-roll-cell');\n    let col = 0;\n    let row = 0;\n\n    for (let i = 0; i < randoms.length; i++) {\n      row = i % 88;\n      var y = Math.random();\n      col = (Math.round(y * 420) + 1) % steps.current.length;\n\n      if (y < 0.1) {\n        //if (steps.current[col].indexOf(notes[row]) === -1)\n        //{\n        //steps.current[col] = steps.current[col].concat([notes[row]]);\n        //console.log(notes[row]);\n        //}\n        //console.log(`row: ${row}, col ${col},  i: ${i}, row * col ${row * col}, bool: ${randoms[(88*col)+row].classList.contains('blue')}`)\n        if (randoms[88 * col + row].classList.contains('blue') === false) {\n          randoms[88 * col + row].classList.toggle('blue');\n          steps.current[col] = steps.current[col].concat([notes[row]]);\n        } //console.log(steps.current);\n        //console.log(steps.current[0]);\n        //console.log(steps.current[col]);\n        //steps.current[col] = steps.current[col].concat([notes[row]]);\n\n      } // col++;\n      // if (i % 8 === 0)\n      // {\n      //     col = col - 8;\n      //     row++;\n      //     console.log(\"here\");\n      // }\n\n    }\n\n    console.log(`randomize: ${steps.current[0]}`);\n  };\n\n  const decrementColumn = () => {\n    setIsPlaying(false);\n    var t = document.querySelector('.piano-roll-container--scrollable');\n    var all_col = document.querySelectorAll('.piano-roll-col-container');\n    console.log(`all_col: ${all_col.length}, cols: ${numOfCol.current}`);\n\n    if (all_col.length === 8) {\n      return;\n    }\n\n    t.removeChild(all_col[all_col.length - 1]);\n    steps.current.pop();\n    numOfCol.current = all_col.length - 1;\n    console.log(`steps.current: ${steps.current}, cols: ${numOfCol.current}`);\n    numOfCells.current -= 88;\n  }; // creates nodes(html elements/tag/object) and appends the node as a child of the container(inserts node into element container) \n  // to make a different colored cell for the sharp notes, regex pattern was made and used to match values a\n\n\n  const addColumnElement = (index = 0) => {\n    const piano_roll_container = document.querySelector('.piano-roll-container--scrollable');\n    const pattern = /\\w#\\d/g;\n    const T = document.querySelector('.tes');\n    let col_container = document.createElement('div');\n    col_container.classList.add('piano-roll-col-container');\n    let col_label = document.createElement('div');\n    col_label.classList.add('piano-roll-col-label');\n    let span = document.createElement('span');\n    span.innerText = index;\n    col_label.appendChild(span);\n    col_container.appendChild(col_label);\n\n    for (let j = 0; j < notes.length; j++) {\n      let col_cell = document.createElement('div');\n      col_cell.classList.add('piano-roll-cell');\n\n      if (numOfCells.current >= 703) {\n        let row;\n        let col = 0;\n\n        for (row = numOfCells.current + 1; row > notes.length - 1;) {\n          row -= notes.length;\n          col++;\n        }\n\n        numOfCells.current = numOfCells.current + 1;\n        col_cell.addEventListener('click', () => {\n          col_cell.classList.toggle('blue');\n          setIsPlaying(false); //console.log(`row: ${row}. col:${col}, notes.length: ${notes.length}, numOfCells: ${numOfCells.current}` );\n          // console.log(`row: ${row}, col: ${col}, index%8 = ${index%8}`)\n\n          T.innerHTML = `col: ${col}, row: ${row}, index%8 = ${index % 8}`;\n\n          if (steps.current[col].indexOf(notes[row]) != -1) {\n            steps.current[col] = steps.current[col].filter(a => {\n              return a != notes[row];\n            }); // console.log(steps.current);\n            // console.log('indexof 0');\n\n            return;\n          } // if the note doesn't exist replace row with one that has been concatinated with the note/value\n\n\n          if (steps.current[col].indexOf(notes[row]) == -1) {\n            steps.current[col] = steps.current[col].concat([notes[row]]); // console.log(steps.current);\n            // console.log('indexof -1')\n\n            return;\n          }\n        });\n      }\n\n      if (notes[j].match(pattern)) col_cell.classList.add('sharp-color');\n      col_container.appendChild(col_cell);\n    }\n\n    piano_roll_container.appendChild(col_container); // console.log(col_container);\n  };\n\n  const incrementColumn = () => {\n    setIsPlaying(false);\n    var t = document.querySelector('.piano-roll-container--scrollable');\n    var all_col = document.querySelectorAll('.piano-roll-col-container');\n    steps.current = steps.current.concat([[]]);\n    numOfCol.current += 1;\n    addColumnElement(numOfCol.current);\n    console.log('added new column, so the current amount of columns are:', numOfCol.current);\n  };\n\n  const clearColLabel = () => {\n    const purple_col = document.querySelector(\".purple\");\n    purple_col.classList.remove('purple');\n  };\n\n  useEffect(() => {\n    const col_label = document.querySelectorAll('.piano-roll-col-label');\n    col_label.forEach(e => {\n      if (e.classList.contains('purple')) console.log('purple');\n    });\n\n    if (isPlaying) {\n      col_label[(previousStepIndex.current + 1) % (numOfCol.current - 1)].classList.remove('purple'); // console.log( `prev plus 1 element = ${(previousStepIndex.current+1)%(numOfCol-1)}, previousIndex: ${previousStepIndex.current}, currentIndex: ${currentStepIndex}`);\n\n      col_label[previousStepIndex.current].classList.remove('purple');\n      col_label[currentStepIndex].classList.add('purple');\n    }\n  }, [currentStepIndex]);\n\n  const initializePianoRoll = () => {\n    let i = 1;\n\n    for (; i <= 8; i++) {\n      addColumnElement(i);\n      numOfCol.current += 1;\n    }\n\n    const row_label = document.querySelector('.piano-roll-row-container');\n    const pattern = /\\w#\\d/g;\n    notes.forEach(e => {\n      var di = document.createElement('div');\n      var span = document.createElement('span');\n      span.innerText = e;\n      di.appendChild(span);\n      di.classList.add('piano-roll-row-label');\n      if (e.match(pattern)) di.classList.add('sharp-color');\n      row_label.appendChild(di);\n      if (e == \"C4\") di.scrollIntoView();\n    });\n  };\n\n  useEffect(() => {\n    const T = document.querySelector('.tes');\n    initializePianoRoll();\n    const test = document.querySelectorAll('.piano-roll-cell'); // aggregates all elements with that className\n    // console.log(test);\n    // for each element\n    // 1 - toggle class on click\n    // 2 - print the row and col of element\n    // 3 - add to matrix (using useRef at the moment. I will try to change that later) if element value is not in matrix\n    // 4 - remove element accordingly if value exists in same row of matrix\n\n    test.forEach((e, index, array) => {\n      numOfCells.current = index;\n      e.addEventListener('click', () => {\n        setIsPlaying(false); // console.log(index%8);\n\n        let col = 0;\n        let row;\n\n        for (row = index; row > notes.length - 1;) {\n          row -= notes.length;\n          col++;\n        } // console.log(`row: ${row}, col: ${col}, index%8 = ${index%8}`)\n\n\n        e.classList.toggle('blue'); // T.innerHTML = `col: ${col}, row: ${row}, index%8 = ${index%8}`;\n        // console.log(`row: ${row}, col: ${col}, index%8 = ${index%8}`)\n        // setSteps(steps[col] = steps[col].concat([notes[row]]));\n        // console.log(steps.current[col].indexOf(notes[row]));\n        // if the note exists in appropriate row replace that row with an array without element\n        // console.log(\"clicked\", steps.current[col].indexOf(notes[row]));\n\n        if (steps.current[col].indexOf(notes[row]) != -1) {\n          steps.current[col] = steps.current[col].filter(a => {\n            return a != notes[row];\n          }); // console.log(steps.current);\n          // console.log('indexof 0');\n\n          return;\n        } // if the note doesn't exist replace row with one that has been concatinated with the note/value\n\n\n        if (steps.current[col].indexOf(notes[row]) == -1) {\n          steps.current[col] = steps.current[col].concat([notes[row]]); // console.log(steps.current);\n          // console.log('indexof -1')\n\n          return;\n        }\n      }); // console.log('done\\n');\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"piano-roll-landing-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"tes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"clickables\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"button\",\n          onClick: () => {\n            setIsPlaying(!isPlaying);\n          },\n          children: !isPlaying ? 'Play' : 'Stop'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"button\",\n          onClick: handleClear,\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"button\",\n          onClick: handleRandom,\n          children: \"Randomizer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Song, {\n        isPlaying: isPlaying,\n        bpm: props.bpm,\n        children: /*#__PURE__*/_jsxDEV(Track, {\n          steps: steps.current // Callback triggers on every step\n          ,\n          onStepPlay: (stepNotes, index) => {\n            setCurrentStepIndex(index);\n            console.log(`prev.current:  ${previousStepIndex.current}, track index: ${index}, calc: ${(index + (numOfCol.current - 2)) % (numOfCol.current - 1)} numOfCol: ${numOfCol.current}`);\n            previousStepIndex.current = (index + (numOfCol.current - 1)) % numOfCol.current;\n            console.log(`num of col: ${numOfCol.current}`);\n          },\n          volume: props.vol,\n          children: /*#__PURE__*/_jsxDEV(Instrument, {\n            type: \"polySynth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"piano-roll-container\",\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"piano-roll-container--scrollable\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"piano-roll-row-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"piano-roll-row-label\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PianoRoll, \"dJ+abbETVPu0PBLCqDjH4PvjAXc=\");\n\n_c = PianoRoll;\n\nvar _c;\n\n$RefreshReg$(_c, \"PianoRoll\");","map":{"version":3,"sources":["/Users/nigel/Documents/GitHub/test/src/components/MusicComponents/PianoRoll.js"],"names":["React","useState","useEffect","useRef","Song","Track","Instrument","PianoRoll","props","isPlaying","setIsPlaying","previousStepIndex","numOfCol","numOfCells","currentStepIndex","setCurrentStepIndex","notes","steps","hello","e","handleClear","testblues","document","querySelectorAll","i","length","classList","toggle","current","col_label","forEach","contains","console","log","remove","handleRandom","randoms","col","row","y","Math","random","round","concat","decrementColumn","t","querySelector","all_col","removeChild","pop","addColumnElement","index","piano_roll_container","pattern","T","col_container","createElement","add","span","innerText","appendChild","j","col_cell","addEventListener","innerHTML","indexOf","filter","a","match","incrementColumn","clearColLabel","purple_col","initializePianoRoll","row_label","di","scrollIntoView","test","array","bpm","stepNotes","vol"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Song, Track, Instrument } from 'reactronica';\nimport './PianoRoll.css';\n// import ClearGrid from './clearGrid.js'\n\nexport default function PianoRoll(props) {\n    const [isPlaying, setIsPlaying] = useState(false);\n    var previousStepIndex = useRef(1);\n    const numOfCol = useRef(0);\n    const numOfCells = useRef(0);\n    const [currentStepIndex, setCurrentStepIndex] = useState(-1);\n    const notes = ['C8', 'B7', 'A#7 ', 'A7', 'G#7 ', 'G7', 'F#7', 'F7', 'E7', 'D#7', ' D7', 'C#7', 'C7', 'B6', 'A#6 ', 'A6', 'G#6 ', 'G6', 'F#6', 'F6', 'E6', 'D#6', ' D6', 'C#6', 'C6', 'B5', 'A#5 ', 'A5', 'G#5 ', 'G5', 'F#5', 'F5', 'E5', 'D#5', ' D5', 'C#5', 'C5', 'B4', 'A#4 ', 'A4', 'G#4 ', 'G4', 'F#4', 'F4', 'E4', 'D#4', ' D4', 'C#4', 'C4', 'B3', 'A#3 ', 'A3', 'G#3 ', 'G3', 'F#3', 'F3', 'E3', 'D#3', ' D3', 'C#3', 'C3', 'B2', 'A#2 ', 'A2', 'G#2 ', 'G2', 'F#2', 'F2', 'E2', 'D#2', ' D2', 'C#2', 'C2', 'B1', 'A#1 ', 'A1', 'G#1 ', 'G1', 'F#1', 'F1 ', 'E1', 'D#1', ' D1', 'C#1', 'C1', 'B0', 'A#0', 'A0'];\n\n    const steps = useRef([\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n        [],\n    ])\n\n\n\n    const hello = (e) => {\n        return e;\n    }\n\n    const handleClear = () => {\n        setIsPlaying(false);\n        //console.log(\"clicked\");\n        const testblues = document.querySelectorAll('div.piano-roll-cell.blue');\n        //console.log(testblues.length);\n        for (let i = 0; i < testblues.length; i++) {\n            testblues[i].classList.toggle('blue');\n            //if (steps.current[col].indexOf(notes[row]) === -1) {\n            //      steps.current[col] = steps.current[col].concat([notes[row]]);\n            //  } \n            //console.log(\"found blue\"); \n        }\n        for (let i = 0; i < steps.current.length; i++) {\n            steps.current[i] = [];\n        }\n\n\n        const col_label = document.querySelectorAll('.piano-roll-col-label');\n        col_label.forEach((e) => {\n            if (e.classList.contains('purple')) {\n                console.log('purple');\n                col_label[previousStepIndex.current].classList.remove('purple');\n            }\n        })\n \n\n\n    };\n\n    const handleRandom = () => {\n        handleClear();\n        const randoms = document.querySelectorAll('div.piano-roll-cell');\n        let col = 0;\n        let row = 0;\n        for (let i = 0; i < randoms.length; i++) {\n            row = i % 88;\n            var y = Math.random();\n            col = (Math.round(y * 420) + 1) % steps.current.length;\n            if (y < 0.1) {\n                //if (steps.current[col].indexOf(notes[row]) === -1)\n                //{\n                //steps.current[col] = steps.current[col].concat([notes[row]]);\n                //console.log(notes[row]);\n\n                //}\n                //console.log(`row: ${row}, col ${col},  i: ${i}, row * col ${row * col}, bool: ${randoms[(88*col)+row].classList.contains('blue')}`)\n                if (randoms[(88 * col) + row].classList.contains('blue') === false) {\n                    randoms[(88 * col) + row].classList.toggle('blue');\n                    steps.current[col] = steps.current[col].concat([notes[row]]);\n\n                }\n                //console.log(steps.current);\n                //console.log(steps.current[0]);\n                //console.log(steps.current[col]);\n                //steps.current[col] = steps.current[col].concat([notes[row]]);\n            }\n            // col++;\n            // if (i % 8 === 0)\n            // {\n            //     col = col - 8;\n            //     row++;\n            //     console.log(\"here\");\n            // }\n\n        }\n        console.log(`randomize: ${steps.current[0]}`);\n    };\n\n    const decrementColumn = () => {\n        setIsPlaying(false);\n        var t = document.querySelector('.piano-roll-container--scrollable');\n        var all_col = document.querySelectorAll('.piano-roll-col-container');\n        console.log(`all_col: ${all_col.length}, cols: ${numOfCol.current}`)\n\n        if (all_col.length === 8) {\n            return;\n        }\n\n        t.removeChild(all_col[all_col.length - 1]);\n        steps.current.pop();\n        numOfCol.current = all_col.length - 1;\n        console.log(`steps.current: ${steps.current}, cols: ${numOfCol.current}`);\n\n        numOfCells.current -= 88;\n\n    }\n\n    // creates nodes(html elements/tag/object) and appends the node as a child of the container(inserts node into element container) \n    // to make a different colored cell for the sharp notes, regex pattern was made and used to match values a\n    const addColumnElement = (index = 0) => {\n        const piano_roll_container = document.querySelector('.piano-roll-container--scrollable');\n        const pattern = /\\w#\\d/g;\n        const T = document.querySelector('.tes');\n\n\n        let col_container = document.createElement('div');\n        col_container.classList.add('piano-roll-col-container');\n        let col_label = document.createElement('div');\n        col_label.classList.add('piano-roll-col-label');\n\n        let span = document.createElement('span');\n        span.innerText = index;\n        col_label.appendChild(span);\n        col_container.appendChild(col_label);\n        for (let j = 0; j < notes.length; j++) {\n            let col_cell = document.createElement('div');\n            col_cell.classList.add('piano-roll-cell');\n            if (numOfCells.current >= 703) {\n                let row;\n                let col = 0;\n                for (row = numOfCells.current + 1; row > notes.length - 1;) {\n                    row -= notes.length;\n                    col++;\n                }\n                numOfCells.current = numOfCells.current + 1;\n                col_cell.addEventListener('click', () => {\n                    col_cell.classList.toggle('blue');\n                    setIsPlaying(false);\n\n                    //console.log(`row: ${row}. col:${col}, notes.length: ${notes.length}, numOfCells: ${numOfCells.current}` );\n\n\n                    // console.log(`row: ${row}, col: ${col}, index%8 = ${index%8}`)\n                    T.innerHTML = `col: ${col}, row: ${row}, index%8 = ${index % 8}`;\n\n\n                    if (steps.current[col].indexOf(notes[row]) != -1) {\n                        steps.current[col] = steps.current[col].filter((a) => {\n                            return a != notes[row];\n                        });\n                        // console.log(steps.current);\n                        // console.log('indexof 0');\n                        return;\n                    }\n                    // if the note doesn't exist replace row with one that has been concatinated with the note/value\n                    if (steps.current[col].indexOf(notes[row]) == -1) {\n                        steps.current[col] = steps.current[col].concat([notes[row]]);\n                        // console.log(steps.current);\n                        // console.log('indexof -1')\n                        return;\n                    }\n                })\n            }\n            if (notes[j].match(pattern)) col_cell.classList.add('sharp-color');\n            col_container.appendChild(col_cell);\n        }\n\n\n        piano_roll_container.appendChild(col_container);\n        // console.log(col_container);\n\n    }\n\n    const incrementColumn = () => {\n        setIsPlaying(false);\n\n        var t = document.querySelector('.piano-roll-container--scrollable');\n\n        var all_col = document.querySelectorAll('.piano-roll-col-container');\n        steps.current = steps.current.concat([[]]);\n        numOfCol.current += 1;\n        addColumnElement(numOfCol.current);\n\n        console.log('added new column, so the current amount of columns are:', numOfCol.current)\n    }\n\n    const clearColLabel = () => {\n        const purple_col = document.querySelector(\".purple\");\n        purple_col.classList.remove('purple');\n    }\n    useEffect(() => {\n        const col_label = document.querySelectorAll('.piano-roll-col-label');\n        col_label.forEach((e) => {\n            if (e.classList.contains('purple')) console.log('purple');\n        })\n\n        if (isPlaying) {\n\n            col_label[(previousStepIndex.current + 1) % (numOfCol.current - 1)].classList.remove('purple');\n            // console.log( `prev plus 1 element = ${(previousStepIndex.current+1)%(numOfCol-1)}, previousIndex: ${previousStepIndex.current}, currentIndex: ${currentStepIndex}`);\n            col_label[previousStepIndex.current].classList.remove('purple');\n            col_label[currentStepIndex].classList.add('purple');\n        }\n    }, [currentStepIndex])\n\n    const initializePianoRoll = () => {\n        let i = 1;\n        for (; i <= 8; i++) {\n            addColumnElement(i);\n            numOfCol.current += 1;\n        }\n\n        const row_label = document.querySelector('.piano-roll-row-container');\n        const pattern = /\\w#\\d/g;\n        notes.forEach((e) => {\n            var di = document.createElement('div');\n            var span = document.createElement('span');\n\n            span.innerText = e;\n            di.appendChild(span);\n            di.classList.add('piano-roll-row-label');\n            if (e.match(pattern)) di.classList.add('sharp-color');\n            row_label.appendChild(di);\n\n            if (e == \"C4\") di.scrollIntoView();\n        })\n    }\n    useEffect(() => {\n        const T = document.querySelector('.tes');\n\n        initializePianoRoll();\n\n        const test = document.querySelectorAll('.piano-roll-cell'); // aggregates all elements with that className\n        // console.log(test);\n        // for each element\n        // 1 - toggle class on click\n        // 2 - print the row and col of element\n        // 3 - add to matrix (using useRef at the moment. I will try to change that later) if element value is not in matrix\n        // 4 - remove element accordingly if value exists in same row of matrix\n        test.forEach((e, index, array) => {\n            numOfCells.current = index;\n            e.addEventListener('click', () => {\n                setIsPlaying(false);\n                // console.log(index%8);\n                let col = 0;\n                let row;\n                for (row = index; row > notes.length - 1;) {\n                    row -= notes.length;\n                    col++;\n                }\n\n                // console.log(`row: ${row}, col: ${col}, index%8 = ${index%8}`)\n                e.classList.toggle('blue');\n                // T.innerHTML = `col: ${col}, row: ${row}, index%8 = ${index%8}`;\n                // console.log(`row: ${row}, col: ${col}, index%8 = ${index%8}`)\n                // setSteps(steps[col] = steps[col].concat([notes[row]]));\n                // console.log(steps.current[col].indexOf(notes[row]));\n                // if the note exists in appropriate row replace that row with an array without element\n                // console.log(\"clicked\", steps.current[col].indexOf(notes[row]));\n                if (steps.current[col].indexOf(notes[row]) != -1) {\n                    steps.current[col] = steps.current[col].filter((a) => {\n                        return a != notes[row];\n                    });\n                    // console.log(steps.current);\n                    // console.log('indexof 0');\n                    return;\n                }\n                // if the note doesn't exist replace row with one that has been concatinated with the note/value\n                if (steps.current[col].indexOf(notes[row]) == -1) {\n                    steps.current[col] = steps.current[col].concat([notes[row]]);\n                    // console.log(steps.current);\n                    // console.log('indexof -1')\n                    return;\n                }\n\n            })\n            // console.log('done\\n');\n\n\n        })\n    }, []);\n\n\n\n    return (\n        <>\n            <div className=\"piano-roll-landing-container\">\n                <p className=\"tes\"></p>\n                <div className=\"clickables\">\n                    <button class=\"button\" onClick={() => {\n                        setIsPlaying(!isPlaying);\n                    }}>\n                        {!isPlaying ? 'Play' : 'Stop'}\n                    </button>\n\n                    <button class=\"button\" onClick={handleClear}>Clear</button>\n\n                    <button class=\"button\" onClick={handleRandom}>Randomizer</button>\n                    {/* <button onClick={decrementColumn}> \n                            remove column\n                        </button>\n                        <button onClick={incrementColumn}> \n                            add column\n                        </button> */}\n                    {/* <button onClick={() => setIsPlaying(!isPlaying)}>\n                            {!isPlaying ? 'Play' : 'Stop'}\n                        </button> */}\n                </div>\n                {/* Reactronica Components */}\n                <Song isPlaying={isPlaying} bpm={props.bpm} >\n                    <Track\n                        steps={steps.current}\n                        // Callback triggers on every step\n                        onStepPlay={(stepNotes, index) => {\n\n                            setCurrentStepIndex(index);\n                            console.log(`prev.current:  ${previousStepIndex.current}, track index: ${index}, calc: ${(index + (numOfCol.current - 2)) % (numOfCol.current - 1)} numOfCol: ${numOfCol.current}`)\n                            previousStepIndex.current = (index + (numOfCol.current - 1)) % (numOfCol.current);\n                            console.log(`num of col: ${numOfCol.current}`)\n                        }}\n                        volume={props.vol}\n                    >\n                        <Instrument type=\"polySynth\" />\n                    </Track>\n                </Song>\n\n                <section className=\"piano-roll-container\">\n                    <section className=\"piano-roll-container--scrollable\">\n                        <div className=\"piano-roll-row-container\">\n                            <div className=\"piano-roll-row-label\" >\n                                <span></span>\n                            </div>\n\n\n                        </div>\n                    </section>\n                </section>\n\n            </div>\n            <div>\n\n            </div>\n        </>\n    );\n}"]},"metadata":{},"sourceType":"module"}